$("#sss_overlay").dialog({autoOpen:false,modal:true,draggable:false,width:"650",dialogClass:"ui-dialog-sqc",resizable:false,close:function(){$("#errorMessage").hide();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show();var b=$('select[id="sssSaveAlertType"] option:selected').val();$('select[id="sssSaveAlertType"]').val(b).attr("selected","selected").trigger("change");var a=$('select[id="sssSaveEmailFormat"] option:selected').val();$('select[id="sssSaveEmailFormat"]').val(a).attr("selected","selected").trigger("change");$(".CHEMsummImg").show()},create:function(){$("#emailAlertsCheckbox").change(function(){sssChangeEmailAlertFields()});var a=$(this).dialog("widget");$(".ui-dialog-titlebar-close span:first()",a).removeClass().addClass("fa fa-times-circle icon-clearnew dialog-close-adjust");$(".ui-dialog-titlebar-close span.ui-button-text",a).text("");$(".ui-dialog-titlebar-close",a).removeClass().addClass("dialog-close-transparent")},open:function(){var a=$("#sss_overlay").get(0).scrollHeight;$("#sss_overlay").height(a+20);$("#sss_overlay").css("overflow","hidden");$("#sss_overlay").css("vertical-align","middle");$(".CHEMsummImg").hide()},overlay:{opacity:0.1,background:"#C2C2C2"}});$("#sss_overlay_response").dialog({autoOpen:false,modal:true,draggable:false,width:"600",dialogClass:"ui-dialog-sqc",resizable:false,open:function(){var a=$("#sss_overlay_response").get(0).scrollHeight;$("#sss_overlay_response").height(a);$("#sss_overlay_response").css("overflow","hidden");$("#sss_overlay_response").css("display","table-cell");$("#sss_overlay_response").css("vertical-align","middle")},overlay:{opacity:0.1,background:"#C2C2C2"}});function sss_overlay(){$("#sss_overlay").dialog("open")}function modifySSSOverlayClose(a){$("#sss_overlay").dialog({close:function(){$(location).attr("href",a)}});$("#sss_overlay_response").dialog({close:function(){$(location).attr("href",a)}})}function sss_overlay_resp_close(){$("#sss_overlay_response").dialog("close");$("#sss_overlay").dialog("close")}function sssChangeEmailAlertFields(){var a=$("#emailAlertsCheckbox").is(":checked");if(a){$("#sssSaveEmailAddress").prop("disabled",false);$("#sssSaveAlertType").prop("disabled",false);$("#sssSaveEmailFormat").prop("disabled",false);$("input:radio[name=frequency]").prop("disabled",false)}else{$("#sssSaveEmailAddress").prop("disabled","disabled");$("#sssSaveAlertType").prop("disabled","disabled");$("#sssSaveEmailFormat").prop("disabled","disabled");$("input:radio[name=frequency]").prop("disabled","disabled")}}function isValidEmail(a){var c=/^(([a-zA-Z0-9])(([a-zA-Z0-9])*(['\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+( )*([,;])?( )*)+$/;a=$.trim(a);var b=new String(a);if(b.match(c)){return true}return false}function isValidHistoryName(a){var c=/(.*)([\\<>&\"])+(.*)/;var b=new String(a);if(b.match(c)){return false}return true}function isValidHistoryDesc(c){var b=/(.*)([\\<>])+(.*)/;var a=new String(c);if(a.match(b)){return false}return true}function checkSaveFields(){var b=true;var a=$('input:text[name="search_name"]').val();if(a.length<=0){$("#sssSaveErrorHistoryNameMissingDiv").show();$("#sssSaveErrorHistoryNameInvalidDiv").hide();b=false}else{if(!isValidHistoryName(a)){$("#sssSaveErrorHistoryNameInvalidDiv").show();$("#sssSaveErrorHistoryNameMissingDiv").hide();b=false}else{$("#sssSaveErrorHistoryNameMissingDiv").hide();$("#sssSaveErrorHistoryNameInvalidDiv").hide()}}var d=$('input:text[name="search_desc"]').val();if(!isValidHistoryDesc(d)){$("#sssSaveErrorHistoryDescInvalidDiv").show();b=false}else{$("#sssSaveErrorHistoryDescInvalidDiv").hide()}if($("#emailAlertsCheckbox").is(":checked")){var c=$('input:text[name="email_address"]').val();if(!isValidEmail(c)){$("#sssSaveErrorEmailDiv").show();return false}$("#sssSaveErrorEmailDiv").hide()}return b}function sss_add(a){if(checkSaveFields()){$("#sssSaveEmailAddress").prop("disabled",false);$("#sssSaveAlertType").prop("disabled",false);$("#sssSaveEmailFormat").prop("disabled",false);$("input:radio[name=frequency]").prop("disabled",false);$("#saveHistoryButton").hide();$("#saveHistoryImageDisabled").show();$.ajax({type:"POST",url:a,data:$("#sss_overlay_form").serialize(),success:function(h){var g=h.Status;if(g=="Success"){$("#search_name").html(h.search_name);$("#search_desc").html(h.search_desc);var m=h.user_query_string;m=m.replace(/\&nbsp;/g," ");$("#user_query_string").html(m);if(h.alert_status=="On"){var b=$("#alertStatusOn").val();$("#alert_status").html(b)}else{var e=$("#alertStatusOff").val();$("#alert_status").html(e)}var l=h.rss_url;if(location.protocol=="https:"){l=l.replace("http","https")}$("#rss_feed #rssURL").attr("href","javascript:openWindow('"+l+"','_WOK_RSS_')");if(h.refinedBy!=null&&h.refinedBy!=""){$("#refinedBy").html($("#refinedByTag").text()+h.refinedBy);$("#refinedBy").show()}if(h.alert_status!=null&&h.alert_status.toLowerCase()=="on"){$("#email_address").html(h.email_address);var d=$("#sssSaveAlertType :selected").text();$("#alert_type").html(d);var o=$("#sssSaveEmailFormat :selected").text();$("#email_format").html(o);var n=$("input#product").val();var c=$("input#diiWeekly").val();var j=$("input#diiMonthly").val();if(n=="DIIDW"){if(h.frequency=="Weekly"){$("#frequency").html(c)}else{$("#frequency").html(j)}}else{$("#frequency").html(h.frequency)}$("#confirmationAlertStatusDiv").show()}else{$("#alert_status").html($("#alertOffStatus").val());$("#confirmationAlertStatusDiv").hide()}$("#sss_overlay").dialog({close:function(){$("#errorMessage").hide();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}});var i=$('#sss_overlay_form input[name="searchIDToDelete"]').val();if(i!=null&&i!=""){$('#sss_overlay_form input[name="searchIDToDelete"]').remove()}$("#sss_overlay_response").dialog("open");$("#sss_overlay").dialog("close")}else{if(h.errorMessage=="DUPLICATE.SEARCH.NAME"){var k=$("#saveSearchVerifyOverwriteMessage").val();if(!confirm(k)){$("#saveHistoryButton").show();$("#saveHistoryImageDisabled").hide();return}processDupSearchName(h,a)}else{if(h.errorMessage=="OVER.MAX.GROUP.ALERTS.ALLOWED"){var k=$("#overMaxGroupAlertsAllowedMessage").val();alert(k);$("#sss_overlay").dialog("close");return}else{if(h.errorMessage=="OVER.MAX.ALLOWED.USER.QUERY.LENGTH"){var f=$("#overMaxAllowedUserQueryLength").val();alert(f);$("#sss_overlay").dialog("close");return}else{$("#errorMessage").show()}}}}$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()},error:function(b){$("#errorMessage").show();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}})}}function sss_add_local(a){$("#localSaveError").html("");$.ajax({type:"POST",url:a,success:function(c){var b=c.match(/errorMessage/gi);if(b!=null&&b.length>0){$("#localSaveError").html(c)}else{$("#csiovldialog").dialog("close");go_to_url(a)}},error:function(b){if(!b.responseText){$(location).attr("href",a)}else{$("#localSaveError").html(b)}}})}function processDupSearchName(d,b){var a=d.searchIDToDelete;var c=$("#sss_overlay_form");c.append('<input type="hidden" name="searchIDToDelete" value="'+a+'" />');sss_add(b)};